{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nconst getBase64 = file => new Promise((resolve, reject) => {\n  const reader = new FileReader();\n  reader.readAsDataURL(file);\n  reader.onload = () => resolve(reader.result);\n  reader.onerror = error => reject(error);\n});\n/*\r\nconst getBase64 = async (file: File): Promise<string> => {\r\n  const image = await Jimp.read(file);\r\n  return new Promise((resolve) => {\r\n    image.getBase64(Jimp.MIME_JPEG, (err, src) => {\r\n      resolve(src);\r\n    });\r\n  });\r\n};\r\n*/\nlet CreateProductoComponent = class CreateProductoComponent {\n  constructor(productoServicio, router, _auth, _token, msg) {\n    this.productoServicio = productoServicio;\n    this.router = router;\n    this._auth = _auth;\n    this._token = _token;\n    this.msg = msg;\n    this.fileList = [];\n    this.previewImage = '';\n    this.previewVisible = false;\n    this.product = {\n      id_producto: '',\n      nombre: '',\n      descripcion: '',\n      precio: Number(),\n      precio_fabrica: Number(),\n      cantidad: Number(),\n      descuento: Number(),\n      fecha_registro: new Date(Date.now()),\n      fileList: []\n    };\n    this.handlePreview = file => __awaiter(this, void 0, void 0, function* () {\n      if (!file.url && !file.preview) {\n        file.preview = yield getBase64(file.originFileObj);\n      }\n      this.previewImage = file.url || file.preview;\n      this.previewVisible = true;\n    });\n  }\n  ngOnInit() {\n    let id = this._token.getId();\n    this.userId = id;\n    console.log(this.userId);\n  }\n  nuevoProduct(file) {\n    this._auth;\n    this.product.fileList[0] = this.fileList[0].thumbUrl;\n    this.productoServicio.nuevoProducto(this.product, this.userId).subscribe(res => {\n      console.log(res);\n      file.preview = getBase64(file.originFileObj);\n      this.router.navigate(['/empresa-producto']);\n      console.log(this.fileList[0].thumbUrl);\n    }, err => console.log(err));\n  }\n};\nCreateProductoComponent = __decorate([Component({\n  selector: 'app-create-producto',\n  templateUrl: './create-producto.component.html',\n  styleUrls: ['./create-producto.component.scss']\n})], CreateProductoComponent);\nexport { CreateProductoComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}